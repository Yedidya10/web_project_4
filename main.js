!function(){"use strict";class e{constructor(e,t){let{handleCardClick:s}=t;var n,r;r=()=>{this._cardElement.remove(),this._cardElement=null},(n="_handleDelete")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._name=e.name,this._link=e.link,this._cardSelector=document.querySelector("#card-template").content,this._handleCardClick=s}_getCardTemplate(){return this._cardSelector.querySelector(".card").cloneNode(!0)}createCard(){this._cardElement=this._getCardTemplate();const e=this._cardElement.querySelector(".card__image"),t={src:this._link,alt:this._name};return e.setAttribute("src",t.src),e.setAttribute("alt",t.alt),this._cardElement.querySelector(".card__name").textContent=this._name,this._setLikeButtonHandler(),this._setTrashButtonHandler(),this._setHandleCardClick(e,t),this._cardElement}_setHandleCardClick(e,t){e.addEventListener("click",(()=>{this._handleCardClick(t)}))}_handleLike(e){e.target.classList.toggle("card__like_active")}_setLikeButtonHandler(){this._cardElement.querySelector(".card__like").addEventListener("click",this._handleLike)}_setTrashButtonHandler(){this._cardElement.querySelector(".card__trash").addEventListener("click",this._handleDelete)}}class t{constructor(e,t){var s,n;n=(e,t)=>{const s=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)},(s="_showInputError")in this?Object.defineProperty(this,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[s]=n,this._settings=e,this._form=t}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._form.querySelector(this._settings.submitButtonSelector),this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this.toggleButtonState(),this._checkInputValidity(e)}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){n(this,"_handleMouseClosePopup",(e=>{e.target===this.popup&&this.closePopup()})),n(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.closePopup()})),this.popup=e,this.closePopup=this.closePopup.bind(this),this.openPopup=this.openPopup.bind(this),this.setEventListeners=this.setEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this)}setEventListeners(){this._closePopupButton=this.popup.querySelector(".popup__close"),this._closePopupButton.addEventListener("click",this.closePopup),document.addEventListener("mousedown",this._handleMouseClosePopup),document.addEventListener("keydown",this._handleEscClose)}removeEventListeners(){this._closePopupButton.removeEventListener("click",this.closePopup),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleMouseClosePopup)}openPopup(){this.popup.classList.add("popup_opened"),this.setEventListeners()}closePopup(){this.removeEventListeners(),this.popup.classList.remove("popup_opened")}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o extends r{constructor(e,t){let{handleSubmit:s}=t;super(e),i(this,"_getInputsValue",(()=>{const e={},t=this.popup.querySelectorAll(".form__input");for(const s of t)e[s.name]=s.value;return console.log(e),e})),i(this,"_handleSubmitListener",(()=>{this._handleSubmit(this._getInputsValue())})),i(this,"setEventListeners",(()=>{super.setEventListeners(),this.popup.querySelector(".form").addEventListener("submit",this._handleSubmitListener)})),i(this,"removeEventListeners",(()=>{super.removeEventListeners(),this.popup.querySelector(".form").removeEventListener("submit",this._handleSubmitListener)})),i(this,"closePopup",(()=>{super.closePopup(),this.removeEventListeners(),this.popup.querySelector(".form").reset()})),this._handleSubmit=s}}class a extends r{constructor(e){var t,s;super(e),s=e=>{super.openPopup(),this.popup.querySelector(".popup__image").src=e.src,this.popup.querySelector(".popup__image").alt=e.alt,this.popup.querySelector(".popup__name").textContent=e.alt},(t="openPopup")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s}}const l={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},u=document.querySelector(".profile__edit"),c=document.querySelector("#edit-profile-popup"),p=c.querySelector("#edit-profile-form"),d=document.querySelector(".profile__name"),h=document.querySelector(".profile__about-me"),m=p.querySelector("#name"),_=p.querySelector("#about-me"),v=document.querySelector(".profile__add-card"),b=document.querySelector("#add-place-popup"),E=document.querySelector("#add-place-form"),L=document.querySelector("#image-popup"),y=new class{constructor(e,t){s(this,"getUserInfo",(()=>({name:this._userName.textContent,job:this._userJob.textContent}))),s(this,"setUserInfo",(e=>{this._userName.textContent=e.name,this._userJob.textContent=e.job})),this._userName=e,this._userJob=t}}(d,h),f=new t(l,p);f.enableValidation();const S=new t(l,E);S.enableValidation();const g=t=>new e(t,{handleCardClick:e=>{const t=new a(L);t.openPopup(e),t.setEventListeners()}}).createCard(),C=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=g(e);C.addItem(t)}},".cards");C.renderItems();const k=new o(b,{handleSubmit:e=>{const t={name:e.title,link:e.url},s=g(t);C.addItem(s),k.closePopup()}}),P=new o(c,{handleSubmit:e=>{const t={name:e.name,job:e.about};y.setUserInfo(t),P.closePopup()}});v.addEventListener("click",(()=>{k.openPopup(),S.toggleButtonState()})),u.addEventListener("click",(()=>{P.openPopup(),(()=>{const{name:e,job:t}=y.getUserInfo();m.value=e,_.value=t})(),f.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3BvcHVwL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cC9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2RhdGEvY2FyZHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9kb21Db25zdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgeyBoYW5kbGVDYXJkQ2xpY2sgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfZ2V0Q2FyZFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IHRoaXMuX2NhcmRTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBjYXJkSW1hZ2VEYXRhID0ge1xuICAgICAgc3JjOiB0aGlzLl9saW5rLFxuICAgICAgYWx0OiB0aGlzLl9uYW1lXG4gICAgfVxuICAgIGNhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgY2FyZEltYWdlRGF0YS5zcmMpO1xuICAgIGNhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgY2FyZEltYWdlRGF0YS5hbHQpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRMaWtlQnV0dG9uSGFuZGxlcigpO1xuICAgIHRoaXMuX3NldFRyYXNoQnV0dG9uSGFuZGxlcigpO1xuICAgIHRoaXMuX3NldEhhbmRsZUNhcmRDbGljayhjYXJkSW1hZ2UsIGNhcmRJbWFnZURhdGEpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldEhhbmRsZUNhcmRDbGljayAoY2FyZEltYWdlLCBjYXJkSW1hZ2VEYXRhKSB7XG4gICAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soY2FyZEltYWdlRGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZShldnQpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcbiAgfTtcblxuICBfc2V0TGlrZUJ1dHRvbkhhbmRsZXIoKSB7XG4gICAgY29uc3QgY2FyZExpa2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XG4gICAgY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgX3NldFRyYXNoQnV0dG9uSGFuZGxlcigpIHtcbiAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XG4gICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH07XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlICgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMucG9wdXAgPSBwb3B1cDtcbiAgICB0aGlzLmNsb3NlUG9wdXAgPSB0aGlzLmNsb3NlUG9wdXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9wZW5Qb3B1cCA9IHRoaXMub3BlblBvcHVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycyA9IHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzID0gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZU1vdXNlQ2xvc2VQb3B1cCA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5wb3B1cCl7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBCdXR0b24gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcbiAgICB0aGlzLl9jbG9zZVBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlUG9wdXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW91c2VDbG9zZVBvcHVwKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VQb3B1cEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZVBvcHVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb3VzZUNsb3NlUG9wdXApO1xuICB9XG5cbiAgb3BlblBvcHVwKCkge1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgY2xvc2VQb3B1cCgpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCB7IGhhbmRsZVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dHNWYWx1ZSA9ICgpID0+IHtcbiAgICBjb25zdCBpbnB1dHNWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBmb3JtSW5wdXRzID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcbiAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGZvcm1JbnB1dHMpIHtcbiAgICAgIGlucHV0c1ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhpbnB1dHNWYWx1ZXMpO1xuICAgIHJldHVybiBpbnB1dHNWYWx1ZXM7XG4gIH07XG5cbiAgX2hhbmRsZVN1Ym1pdExpc3RlbmVyID0gKCkgPT4ge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dHNWYWx1ZSgpKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0TGlzdGVuZXIpO1xuICB9O1xuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIikucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRMaXN0ZW5lcik7XG4gIH07XG5cbiAgY2xvc2VQb3B1cCA9ICgpID0+IHtcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpLnJlc2V0KCk7XG4gIH07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgc3VwZXIocG9wdXApO1xuICB9XG5cbiAgb3BlblBvcHVwID0gKGNhcmRJbWFnZURhdGEpID0+IHtcbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcbiAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpLnNyYyA9IGNhcmRJbWFnZURhdGEuc3JjO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIikuYWx0ID0gY2FyZEltYWdlRGF0YS5hbHQ7XG4gICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19uYW1lXCIpLnRleHRDb250ZW50ID0gY2FyZEltYWdlRGF0YS5hbHQ7XG4gIH07XG59IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH1cclxuXTtcclxuIiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0X2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLXBvcHVwXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID1cclxuICBlZGl0UHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLWZvcm1cIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXQtbWVcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWNhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtcGxhY2UtcG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wbGFjZS1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtcG9wdXBcIik7IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cC9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXAvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGEvY2FyZHMuanNcIjtcbmltcG9ydCB7XG4gIHNldHRpbmdzLFxuICBpbWFnZVBvcHVwLFxuICBlZGl0UHJvZmlsZUJ1dHRvbixcbiAgZWRpdFByb2ZpbGVGb3JtLFxuICBlZGl0UHJvZmlsZVBvcHVwLFxuICB1c2VyTmFtZSxcbiAgdXNlckpvYixcbiAgbmFtZUlucHV0LFxuICBqb2JJbnB1dCxcbiAgYWRkUGxhY2VCdXR0b24sXG4gIGFkZFBsYWNlUG9wdXAsXG4gIGFkZFBsYWNlRm9ybSxcbn0gZnJvbSBcIi4uL3V0aWxzL2RvbUNvbnN0LmpzXCI7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJOYW1lLCB1c2VySm9iKTtcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRQcm9maWxlRm9ybSk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRQbGFjZUZvcm0pO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwge1xuICAgIGhhbmRsZUNhcmRDbGljazogKGNhcmRJbWFnZURhdGEpID0+IHtcbiAgICAgIGNvbnN0IHBvcHVwV2l0aEltYWdlVmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwKTtcbiAgICAgIHBvcHVwV2l0aEltYWdlVmlldy5vcGVuUG9wdXAoY2FyZEltYWdlRGF0YSk7XG4gICAgICBwb3B1cFdpdGhJbWFnZVZpZXcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgbmV3Q2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBuZXdDYXJkc1NlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNcIlxuKTtcbm5ld0NhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBwb3B1cFdpdGhBZGRQbGFjZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRQbGFjZVBvcHVwLCB7XG4gIGhhbmRsZVN1Ym1pdDogKGlucHV0c1ZhbHVlcykgPT4ge1xuICAgIGNvbnN0IGNhcmREYXRhID0ge1xuICAgICAgbmFtZTogaW5wdXRzVmFsdWVzLnRpdGxlLFxuICAgICAgbGluazogaW5wdXRzVmFsdWVzLnVybCxcbiAgICB9O1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgbmV3Q2FyZHNTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIHBvcHVwV2l0aEFkZFBsYWNlRm9ybS5jbG9zZVBvcHVwKCk7XG4gIH0sXG59KTtcblxuY29uc3QgcG9wdXBXaXRoRWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFByb2ZpbGVQb3B1cCwge1xuICBoYW5kbGVTdWJtaXQ6IChpbnB1dHNWYWx1ZXMpID0+IHtcbiAgICBjb25zdCB1c2VySW5mb0RhdGEgPSB7XG4gICAgICBuYW1lOiBpbnB1dHNWYWx1ZXMubmFtZSxcbiAgICAgIGpvYjogaW5wdXRzVmFsdWVzLmFib3V0LFxuICAgIH07XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckluZm9EYXRhKTtcbiAgICBwb3B1cFdpdGhFZGl0UHJvZmlsZUZvcm0uY2xvc2VQb3B1cCgpO1xuICB9LFxufSk7XG5cbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwV2l0aEFkZFBsYWNlRm9ybS5vcGVuUG9wdXAoKTtcbiAgY2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFdpdGhFZGl0UHJvZmlsZUZvcm0ub3BlblBvcHVwKCk7XG4gIGNvbnN0IGZpbGxQcm9maWxlRm9ybSA9ICgpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gam9iO1xuICB9O1xuICBmaWxsUHJvZmlsZUZvcm0oKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYikge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XG4gIH1cblxuICBnZXRVc2VySW5mbyA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfTtcbiAgXG4gIHNldFVzZXJJbmZvID0gKGlucHV0c0RhdGEpID0+IHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGlucHV0c0RhdGEubmFtZTtcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gaW5wdXRzRGF0YS5qb2I7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IgKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH07XG5cbiAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldENhcmRUZW1wbGF0ZSIsImNsb25lTm9kZSIsImNyZWF0ZUNhcmQiLCJjYXJkSW1hZ2UiLCJjYXJkSW1hZ2VEYXRhIiwic3JjIiwiYWx0Iiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJfc2V0TGlrZUJ1dHRvbkhhbmRsZXIiLCJfc2V0VHJhc2hCdXR0b25IYW5kbGVyIiwiX3NldEhhbmRsZUNhcmRDbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZSIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9oYW5kbGVEZWxldGUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm0iLCJpZCIsImFkZCIsIl9zZXR0aW5ncyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJzb21lIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfYnV0dG9uRWxlbWVudCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXAiLCJjbG9zZVBvcHVwIiwia2V5IiwiYmluZCIsIm9wZW5Qb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VQb3B1cEJ1dHRvbiIsIl9oYW5kbGVNb3VzZUNsb3NlUG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiaW5wdXRzVmFsdWVzIiwiZm9ybUlucHV0cyIsImlucHV0IiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dHNWYWx1ZSIsIl9oYW5kbGVTdWJtaXRMaXN0ZW5lciIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJmb3JtU2VsZWN0b3IiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImVkaXRQcm9maWxlUG9wdXAiLCJlZGl0UHJvZmlsZUZvcm0iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImFkZFBsYWNlQnV0dG9uIiwiYWRkUGxhY2VQb3B1cCIsImFkZFBsYWNlRm9ybSIsImltYWdlUG9wdXAiLCJ1c2VySW5mbyIsIl91c2VyTmFtZSIsImpvYiIsIl91c2VySm9iIiwiaW5wdXRzRGF0YSIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJjYXJkRGF0YSIsInBvcHVwV2l0aEltYWdlVmlldyIsIm5ld0NhcmRzU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJjYXJkRWxlbWVudCIsInByZXBlbmQiLCJwb3B1cFdpdGhBZGRQbGFjZUZvcm0iLCJ0aXRsZSIsInVybCIsInBvcHVwV2l0aEVkaXRQcm9maWxlRm9ybSIsInVzZXJJbmZvRGF0YSIsImFib3V0Iiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=